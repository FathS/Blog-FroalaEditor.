@model MyBlog.Models.View.WriteModel

@{
    ViewData["Title"] = "CreateWrite";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>CreateWrite</h1>

@DateTime.Now
<hr />
<div class="row">
    <div class="col-md-7">
        <form asp-action="CreateWrite" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                @Html.HiddenFor(x => x.Write.Id)
            </div>

            <div class="form-group">
                <label asp-for="Write.Konu" class="control-label"></label>
                <input asp-for="Write.Konu" class="form-control" />
            </div>


            <div class="form-group">
                @Html.TextAreaFor(x => x.Write.Mesaj, new { @id = "texteditor", @name = "content" })
            </div>

            <div class="form-group">
                <label asp-for="Write.Tarih" class="control-label"></label>
                <input asp-for="Write.Tarih" class="form-control" />
            </div>




            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>




<div>
    <a asp-action="Index">Vazgeç</a>
</div>

@section Scripts{

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/xml/xml.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/froala-editor@2.9.4/js/froala_editor.pkgd.min.js"></script>
    @*<script>
        $(function () {
            $('textarea#texteditor').froalaEditor({
                imageUploadUrl: '/Post/FileUploader',
                imageUploadMethod: 'POST',
                imageUploadParams: {
                    id: 'files'
                }
            })
        });
    </script>*@
    <script>
        $(function () {
            $('textarea#texteditor')
                .froalaEditor({
                    // Set the image upload parameter.
                    imageUploadParam: 'files',

                    // Set the image upload URL.
                    imageUploadURL: '/Post/FileUploader',

                    // Set request type.
                    imageUploadMethod: 'POST',

                    // Additional upload params.
                    imageUploadParams: { id: 'MyBlog' },

                   
                    //headers: {
                    //    'Content-Type': 'multipart/form-data',
                    //    'Access-Control-Allow-Origin': '*'
                    //},
                    
                    // Set max image size to 5MB.
                    imageMaxSize: 5 * 1024 * 1024,

                    // Allow to upload PNG and JPG.
                    imageAllowedTypes: ['jpeg', 'jpg', 'png']
                })
                .on('froalaEditor.image.beforeUpload', function (e, editor, images) {
                    // Return false if you want to stop the image upload.
                })
                .on('froalaEditor.image.uploaded', function (e, editor, response) {
                    // Image was uploaded to the server.
                })
                .on('froalaEditor.image.inserted', function (e, editor, $img, response) {
                    // Image was inserted in the editor.
                })
                .on('froalaEditor.image.replaced', function (e, editor, $img, response) {
                    // Image was replaced in the editor.
                })
                .on('froalaEditor.image.error', function (e, editor, error, response) {
                    // Bad link.
                    if (error.code == 1) { //
                    }

            // No link in upload response.
                    else if (error.code == 2) { //
                    }

        // Error during image upload.
                    else if (error.code == 3) { //
                    }

        // Parsing response failed.
                    else if (error.code == 4) { //
                    }

        // Image too text-large.
                    else if (error.code == 5) { //
                    }

        // Invalid image type.
                    else if (error.code == 6) { //
                    }

        // Image can be uploaded only to same domain in IE 8 and IE 9.
                    else if (error.code == 7) { //
                    }

            // Response contains the original server response to the request if available.
          });
      });
    </script>
}
